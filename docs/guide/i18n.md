---
title: i18n
date: 2025-08-04 16:46:36
permalink: /pages/a18eb4/
categories:
  - guide
tags:
  -
author:
  name: 文档作者
  link: https://github.com/your-username
---

# 国际化

cc-admin 框架使用 Vue I18n 作为国际化解决方案，支持多语言切换和本地化。

## 🎯 核心特性

### Vue I18n 优势

- **多语言支持** - 支持中文、英文、繁体中文
- **动态切换** - 运行时语言切换
- **格式化** - 支持数字、日期格式化
- **复数规则** - 支持复数形式处理
- **RTL 支持** - 支持从右到左的布局

## 📁 目录结构

```
src/locales/
├── 📄 index.ts              # 国际化入口
├── 📄 types.ts              # 国际化类型
├── 📁 lang/                 # 语言包
│   ├── 📄 en-US.ts         # 英文
│   ├── 📄 zh-CN.ts         # 简体中文
│   └── 📄 zh-TW.ts         # 繁体中文
└── 📁 modules/              # 国际化模块
    ├── 📄 auth.ts           # 认证相关翻译
    ├── 📄 common.ts         # 通用翻译
    ├── 📄 dashboard.ts      # 仪表盘翻译
    ├── 📄 router.ts         # 路由翻译
    └── 📄 user.ts           # 用户相关翻译
```

## 🔧 核心配置

### 国际化入口

```typescript
// locales/index.ts
import { createI18n } from "vue-i18n";
import enUS from "./lang/en-US";
import zhCN from "./lang/zh-CN";
import zhTW from "./lang/zh-TW";

// 支持的语言列表
export const supportedLocales = [
  {
    key: "zh-CN",
    name: "简体中文",
    flag: "🇨🇳",
    direction: "ltr",
  },
  {
    key: "en-US",
    name: "English",
    flag: "🇺🇸",
    direction: "ltr",
  },
  {
    key: "zh-TW",
    name: "繁體中文",
    flag: "🇹🇼",
    direction: "ltr",
  },
];

// 创建 i18n 实例
export const i18n = createI18n({
  legacy: false,
  locale: getDefaultLocale(),
  fallbackLocale: "zh-CN",
  messages: { "zh-CN": zhCN, "en-US": enUS, "zh-TW": zhTW },
  globalInjection: true,
});

// 获取默认语言
function getDefaultLocale(): string {
  const savedLocale = localStorage.getItem("cc-admin-locale");
  if (savedLocale && supportedLocales.find((l) => l.key === savedLocale)) {
    return savedLocale;
  }

  const browserLang = navigator.language.toLowerCase();
  if (browserLang.includes("zh")) {
    return browserLang.includes("tw") ? "zh-TW" : "zh-CN";
  }

  return "zh-CN";
}

// 设置语言
export function setLocale(locale: string) {
  i18n.global.locale.value = locale;
  localStorage.setItem("cc-admin-locale", locale);
  document.documentElement.lang = locale;
}
```

### 语言包示例

```typescript
// locales/lang/zh-CN.ts
export default {
  common: {
    confirm: "确认",
    cancel: "取消",
    save: "保存",
    delete: "删除",
    edit: "编辑",
    add: "添加",
    search: "搜索",
    loading: "加载中...",
    error: "错误",
    success: "成功",
    warning: "警告",
    info: "信息",
  },
  auth: {
    login: "登录",
    logout: "退出登录",
    username: "用户名",
    password: "密码",
    remember: "记住我",
    forgotPassword: "忘记密码",
    register: "注册",
  },
  dashboard: {
    title: "仪表盘",
    overview: "概览",
    statistics: "统计",
    charts: "图表",
    reports: "报表",
  },
  user: {
    title: "用户管理",
    list: "用户列表",
    profile: "个人资料",
    settings: "设置",
    avatar: "头像",
    email: "邮箱",
    role: "角色",
    status: "状态",
  },
};
```

```typescript
// locales/lang/en-US.ts
export default {
  common: {
    confirm: "Confirm",
    cancel: "Cancel",
    save: "Save",
    delete: "Delete",
    edit: "Edit",
    add: "Add",
    search: "Search",
    loading: "Loading...",
    error: "Error",
    success: "Success",
    warning: "Warning",
    info: "Info",
  },
  auth: {
    login: "Login",
    logout: "Logout",
    username: "Username",
    password: "Password",
    remember: "Remember me",
    forgotPassword: "Forgot password",
    register: "Register",
  },
  dashboard: {
    title: "Dashboard",
    overview: "Overview",
    statistics: "Statistics",
    charts: "Charts",
    reports: "Reports",
  },
  user: {
    title: "User Management",
    list: "User List",
    profile: "Profile",
    settings: "Settings",
    avatar: "Avatar",
    email: "Email",
    role: "Role",
    status: "Status",
  },
};
```

## 🔧 使用示例

### 在组件中使用

```vue
<template>
  <div class="i18n-example">
    <!-- 使用 $t 函数 -->
    <h1>{{ $t("dashboard.title") }}</h1>
    <p>{{ $t("common.loading") }}</p>

    <!-- 使用参数 -->
    <p>{{ $t("user.welcome", { name: username }) }}</p>

    <!-- 使用复数 -->
    <p>{{ $tc("user.count", userCount) }}</p>

    <!-- 语言切换 -->
    <div class="language-switch">
      <button
        v-for="locale in supportedLocales"
        :key="locale.key"
        @click="changeLocale(locale.key)"
        :class="{ active: currentLocale === locale.key }"
      >
        {{ locale.flag }} {{ locale.name }}
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from "vue";
import { useI18n } from "vue-i18n";
import { setLocale, supportedLocales } from "@/locales";

const { t, locale } = useI18n();

const currentLocale = computed(() => locale.value);
const username = ref("John");
const userCount = ref(5);

const changeLocale = (newLocale: string) => {
  setLocale(newLocale);
};
</script>
```

### 在组合式函数中使用

```typescript
// hooks/useLocale.ts
import { computed } from "vue";
import { useI18n } from "vue-i18n";
import { setLocale, supportedLocales } from "@/locales";

export function useLocale() {
  const { t, locale } = useI18n();

  const currentLocale = computed(() => locale.value);

  const changeLocale = (newLocale: string) => {
    setLocale(newLocale);
  };

  const translate = (key: string, params?: Record<string, any>) => {
    return t(key, params);
  };

  return {
    currentLocale,
    changeLocale,
    translate,
    supportedLocales,
  };
}
```

### 语言切换组件

```vue
<template>
  <div class="language-switch">
    <select v-model="currentLocale" @change="handleLocaleChange">
      <option
        v-for="locale in supportedLocales"
        :key="locale.key"
        :value="locale.key"
      >
        {{ locale.flag }} {{ locale.name }}
      </option>
    </select>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from "vue";
import { useLocale } from "@/hooks/useLocale";

const { currentLocale, changeLocale, supportedLocales } = useLocale();

const handleLocaleChange = (event: Event) => {
  const target = event.target as HTMLSelectElement;
  changeLocale(target.value);
};
</script>
```

## 🎯 最佳实践

### 1. 语言包组织

```typescript
// 按功能模块组织语言包
// locales/modules/auth.ts - 认证相关
// locales/modules/dashboard.ts - 仪表盘相关
// locales/modules/user.ts - 用户相关
```

### 2. 类型安全

```typescript
// 定义翻译键类型
type TranslationKey =
  | "common.confirm"
  | "common.cancel"
  | "auth.login"
  | "auth.logout"
  | "dashboard.title"
  | "user.profile";

// 类型安全的翻译函数
function t(key: TranslationKey, params?: Record<string, any>): string {
  return i18n.global.t(key, params);
}
```

### 3. 格式化

```vue
<template>
  <!-- 日期格式化 -->
  <p>{{ $d(new Date(), "long") }}</p>

  <!-- 数字格式化 -->
  <p>{{ $n(1234.56, "currency") }}</p>

  <!-- 复数处理 -->
  <p>{{ $tc("user.count", userCount) }}</p>
</template>
```

---

这套国际化系统为 cc-admin 框架提供了完整的多语言支持能力。
title: i18n
date: 2025-08-04 16:46:36
permalink: /pages/253adb/
categories:

- guide
  tags:
- author:
  name: 文档作者
  link: https://github.com/your-username

---
